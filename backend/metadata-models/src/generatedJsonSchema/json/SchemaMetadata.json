{
  "definitions" : {
    "SchemaMetadata" : {
      "description" : "SchemaMetadata to describe metadata related to store schema",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "schemaName" : {
          "description" : "Schema name e.g. PageViewEvent, identity.Profile, ams.account_management_tracking",
          "type" : "string"
        },
        "platform" : {
          "description" : "Standardized platform urn where schema is defined. The data platform Urn (urn:li:platform:{platform_name})",
          "type" : "string"
        },
        "version" : {
          "description" : "Every change to SchemaMetadata in the resource results in a new version. Version is server assigned. This version is differ from platform native schema version.",
          "type" : "integer",
          "format" : "int64",
          "minimum" : -9223372036854775808,
          "maximum" : 9223372036854775807
        },
        "created" : {
          "default" : {
            "actor" : "urn:li:corpuser:unknown",
            "impersonator" : null,
            "time" : 0,
            "message" : null
          },
          "description" : "An AuditStamp corresponding to the creation of this resource/association/sub-resource. A value of 0 for time indicates missing data.",
          "$ref" : "#/definitions/AuditStamp"
        },
        "lastModified" : {
          "default" : {
            "actor" : "urn:li:corpuser:unknown",
            "impersonator" : null,
            "time" : 0,
            "message" : null
          },
          "description" : "An AuditStamp corresponding to the last modification of this resource/association/sub-resource. If no modification has happened since creation, lastModified should be the same as created. A value of 0 for time indicates missing data.",
          "$ref" : "#/definitions/AuditStamp"
        },
        "deleted" : {
          "default" : null,
          "description" : "An AuditStamp corresponding to the deletion of this resource/association/sub-resource. Logically, deleted MUST have a later timestamp than creation. It may or may not have the same time as lastModified depending upon the resource/association/sub-resource semantics.",
          "$ref" : "#/definitions/AuditStamp"
        },
        "dataset" : {
          "default" : null,
          "description" : "Dataset this schema metadata is associated with.",
          "type" : "string"
        },
        "cluster" : {
          "default" : null,
          "description" : "The cluster this schema metadata resides from",
          "type" : "string"
        },
        "hash" : {
          "description" : "the SHA1 hash of the schema content",
          "type" : "string"
        },
        "platformSchema" : {
          "description" : "The native schema in the dataset's platform.",
          "oneOf" : [ {
            "$ref" : "#/definitions/EspressoSchema"
          }, {
            "$ref" : "#/definitions/OracleDDL"
          }, {
            "$ref" : "#/definitions/MySqlDDL"
          }, {
            "$ref" : "#/definitions/PrestoDDL"
          }, {
            "$ref" : "#/definitions/KafkaSchema"
          }, {
            "$ref" : "#/definitions/BinaryJsonSchema"
          }, {
            "$ref" : "#/definitions/OrcSchema"
          }, {
            "$ref" : "#/definitions/Schemaless"
          }, {
            "$ref" : "#/definitions/KeyValueSchema"
          }, {
            "$ref" : "#/definitions/OtherSchema"
          } ]
        },
        "fields" : {
          "description" : "Client provided a list of fields from document schema.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/SchemaField"
          }
        },
        "primaryKeys" : {
          "default" : null,
          "description" : "Client provided list of fields that define primary keys to access record. Field order defines hierarchical espresso keys. Empty lists indicates absence of primary key access patter. Value is a SchemaField@fieldPath.",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "foreignKeysSpecs" : {
          "default" : null,
          "description" : "Map captures all the references schema makes to external datasets. Map key is ForeignKeySpecName typeref.",
          "type" : "object",
          "additionalProperties" : {
            "$ref" : "#/definitions/ForeignKeySpec"
          }
        },
        "foreignKeys" : {
          "default" : null,
          "description" : "List of foreign key constraints for the schema",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/ForeignKeyConstraint"
          }
        }
      },
      "required" : [ "schemaName", "platform", "version", "created", "lastModified", "hash", "platformSchema", "fields" ]
    },
    "AuditStamp" : {
      "description" : "Data captured on a resource/association/sub-resource level giving insight into when that resource/association/sub-resource moved into a particular lifecycle stage, and who acted to move it into that specific lifecycle stage.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "time" : {
          "description" : "When did the resource/association/sub-resource move into the specific lifecycle stage represented by this AuditEvent.",
          "type" : "integer",
          "format" : "int64",
          "minimum" : -9223372036854775808,
          "maximum" : 9223372036854775807
        },
        "actor" : {
          "description" : "The entity (e.g. a member URN) which will be credited for moving the resource/association/sub-resource into the specific lifecycle stage. It is also the one used to authorize the change.",
          "type" : "string"
        },
        "impersonator" : {
          "default" : null,
          "description" : "The entity (e.g. a service URN) which performs the change on behalf of the Actor and must be authorized to act as the Actor.",
          "type" : "string"
        },
        "message" : {
          "default" : null,
          "description" : "Additional context around how DataHub was informed of the particular change. For example: was the change created by an automated process, or manually.",
          "type" : "string"
        }
      },
      "required" : [ "time", "actor" ]
    },
    "EspressoSchema" : {
      "description" : "Schema text of an espresso table schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "documentSchema" : {
          "description" : "The native espresso document schema.",
          "type" : "string"
        },
        "tableSchema" : {
          "description" : "The espresso table schema definition.",
          "type" : "string"
        }
      },
      "required" : [ "documentSchema", "tableSchema" ]
    },
    "OracleDDL" : {
      "description" : "Schema holder for oracle data definition language that describes an oracle table.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "tableSchema" : {
          "description" : "The native schema in the dataset's platform. This is a human readable (json blob) table schema.",
          "type" : "string"
        }
      },
      "required" : [ "tableSchema" ]
    },
    "MySqlDDL" : {
      "description" : "Schema holder for MySql data definition language that describes an MySql table.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "tableSchema" : {
          "description" : "The native schema in the dataset's platform. This is a human readable (json blob) table schema.",
          "type" : "string"
        }
      },
      "required" : [ "tableSchema" ]
    },
    "PrestoDDL" : {
      "description" : "Schema holder for presto data definition language that describes a presto view.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "rawSchema" : {
          "description" : "The raw schema in the dataset's platform. This includes the DDL and the columns extracted from DDL.",
          "type" : "string"
        }
      },
      "required" : [ "rawSchema" ]
    },
    "KafkaSchema" : {
      "description" : "Schema holder for kafka schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "documentSchema" : {
          "description" : "The native kafka document schema. This is a human readable avro document schema.",
          "type" : "string"
        },
        "documentSchemaType" : {
          "default" : null,
          "description" : "The native kafka document schema type. This can be AVRO/PROTOBUF/JSON.",
          "type" : "string"
        },
        "keySchema" : {
          "default" : null,
          "description" : "The native kafka key schema as retrieved from Schema Registry",
          "type" : "string"
        },
        "keySchemaType" : {
          "default" : null,
          "description" : "The native kafka key schema type. This can be AVRO/PROTOBUF/JSON.",
          "type" : "string"
        }
      },
      "required" : [ "documentSchema" ]
    },
    "BinaryJsonSchema" : {
      "description" : "Schema text of binary JSON schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "schema" : {
          "description" : "The native schema text for binary JSON file format.",
          "type" : "string"
        }
      },
      "required" : [ "schema" ]
    },
    "OrcSchema" : {
      "description" : "Schema text of an ORC schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "schema" : {
          "description" : "The native schema for ORC file format.",
          "type" : "string"
        }
      },
      "required" : [ "schema" ]
    },
    "Schemaless" : { },
    "KeyValueSchema" : {
      "description" : "Schema text of a key-value store schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "keySchema" : {
          "description" : "The raw schema for the key in the key-value store.",
          "type" : "string"
        },
        "valueSchema" : {
          "description" : "The raw schema for the value in the key-value store.",
          "type" : "string"
        }
      },
      "required" : [ "keySchema", "valueSchema" ]
    },
    "OtherSchema" : {
      "description" : "Schema holder for undefined schema types.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "rawSchema" : {
          "description" : "The native schema in the dataset's platform.",
          "type" : "string"
        }
      },
      "required" : [ "rawSchema" ]
    },
    "SchemaField" : {
      "description" : "SchemaField to describe metadata related to dataset schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "fieldPath" : {
          "description" : "Flattened name of the field. Field is computed from jsonPath field.",
          "type" : "string"
        },
        "jsonPath" : {
          "default" : null,
          "description" : "Flattened name of a field in JSON Path notation.",
          "type" : "string"
        },
        "nullable" : {
          "default" : false,
          "description" : "Indicates if this field is optional or nullable",
          "type" : "boolean"
        },
        "description" : {
          "default" : null,
          "description" : "Description",
          "type" : "string"
        },
        "label" : {
          "default" : null,
          "description" : "Label of the field. Provides a more human-readable name for the field than field path. Some sources will\nprovide this metadata but not all sources have the concept of a label. If just one string is associated with\na field in a source, that is most likely a description.\n\nNote that this field is deprecated and is not surfaced in the UI.",
          "type" : "string"
        },
        "created" : {
          "default" : null,
          "description" : "An AuditStamp corresponding to the creation of this schema field.",
          "$ref" : "#/definitions/AuditStamp"
        },
        "lastModified" : {
          "default" : null,
          "description" : "An AuditStamp corresponding to the last modification of this schema field.",
          "$ref" : "#/definitions/AuditStamp"
        },
        "type" : {
          "description" : "Platform independent field type of the field.",
          "$ref" : "#/definitions/SchemaFieldDataType"
        },
        "nativeDataType" : {
          "description" : "The native type of the field in the dataset's platform as declared by platform schema.",
          "type" : "string"
        },
        "recursive" : {
          "default" : false,
          "description" : "There are use cases when a field in type B references type A. A field in A references field of type B. In such cases, we will mark the first field as recursive.",
          "type" : "boolean"
        },
        "globalTags" : {
          "default" : null,
          "description" : "Tags associated with the field",
          "$ref" : "#/definitions/GlobalTags"
        },
        "glossaryTerms" : {
          "default" : null,
          "description" : "Glossary terms associated with the field",
          "$ref" : "#/definitions/GlossaryTerms"
        },
        "isPartOfKey" : {
          "default" : false,
          "description" : "For schema fields that are part of complex keys, set this field to true\nWe do this to easily distinguish between value and key fields",
          "type" : "boolean"
        },
        "isPartitioningKey" : {
          "default" : null,
          "description" : "For Datasets which are partitioned, this determines the partitioning key.\nNote that multiple columns can be part of a partitioning key, but currently we do not support\nrendering the ordered partitioning key.",
          "type" : "boolean"
        },
        "jsonProps" : {
          "default" : null,
          "description" : "For schema fields that have other properties that are not modeled explicitly,\nuse this field to serialize those properties into a JSON string",
          "type" : "string"
        }
      },
      "required" : [ "fieldPath", "nullable", "type", "nativeDataType", "recursive", "isPartOfKey" ]
    },
    "SchemaFieldDataType" : {
      "description" : "Schema field data types",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "Data platform specific types",
          "oneOf" : [ {
            "$ref" : "#/definitions/BooleanType"
          }, {
            "$ref" : "#/definitions/FixedType"
          }, {
            "$ref" : "#/definitions/StringType"
          }, {
            "$ref" : "#/definitions/BytesType"
          }, {
            "$ref" : "#/definitions/NumberType"
          }, {
            "$ref" : "#/definitions/DateType"
          }, {
            "$ref" : "#/definitions/TimeType"
          }, {
            "$ref" : "#/definitions/EnumType"
          }, {
            "$ref" : "#/definitions/NullType"
          }, {
            "$ref" : "#/definitions/MapType"
          }, {
            "$ref" : "#/definitions/ArrayType"
          }, {
            "$ref" : "#/definitions/UnionType"
          }, {
            "$ref" : "#/definitions/RecordType"
          } ]
        }
      },
      "required" : [ "type" ]
    },
    "BooleanType" : { },
    "FixedType" : { },
    "StringType" : { },
    "BytesType" : { },
    "NumberType" : { },
    "DateType" : { },
    "TimeType" : { },
    "EnumType" : { },
    "NullType" : { },
    "MapType" : {
      "description" : "Map field type.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "keyType" : {
          "default" : null,
          "description" : "Key type in a map",
          "type" : "string"
        },
        "valueType" : {
          "default" : null,
          "description" : "Type of the value in a map",
          "type" : "string"
        }
      }
    },
    "ArrayType" : {
      "description" : "Array field type.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "nestedType" : {
          "default" : null,
          "description" : "List of types this array holds.",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        }
      }
    },
    "UnionType" : {
      "description" : "Union field type.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "nestedTypes" : {
          "default" : null,
          "description" : "List of types in union type.",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        }
      }
    },
    "RecordType" : { },
    "GlobalTags" : {
      "description" : "Tag aspect used for applying tags to an entity",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "tags" : {
          "description" : "Tags associated with a given entity",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/TagAssociation"
          }
        }
      },
      "required" : [ "tags" ]
    },
    "TagAssociation" : {
      "description" : "Properties of an applied tag. For now, just an Urn. In the future we can extend this with other properties, e.g.\npropagation parameters.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "tag" : {
          "description" : "Urn of the applied tag",
          "type" : "string"
        },
        "context" : {
          "default" : null,
          "description" : "Additional context about the association",
          "type" : "string"
        },
        "attribution" : {
          "default" : null,
          "description" : "Information about who, why, and how this metadata was applied",
          "$ref" : "#/definitions/MetadataAttribution"
        }
      },
      "required" : [ "tag" ]
    },
    "MetadataAttribution" : {
      "description" : "Information about who, why, and how this metadata was applied",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "time" : {
          "description" : "When this metadata was updated.",
          "type" : "integer",
          "format" : "int64",
          "minimum" : -9223372036854775808,
          "maximum" : 9223372036854775807
        },
        "actor" : {
          "description" : "The entity (e.g. a member URN) responsible for applying the assocated metadata. This can\neither be a user (in case of UI edits) or the datahub system for automation.",
          "type" : "string"
        },
        "source" : {
          "default" : null,
          "description" : "The DataHub source responsible for applying the associated metadata. This will only be filled out\nwhen a DataHub source is responsible. This includes the specific metadata test urn, the automation urn.",
          "type" : "string"
        },
        "sourceDetail" : {
          "default" : { },
          "description" : "The details associated with why this metadata was applied. For example, this could include\nthe actual regex rule, sql statement, ingestion pipeline ID, etc.",
          "type" : "object",
          "additionalProperties" : {
            "type" : "string"
          }
        }
      },
      "required" : [ "time", "actor", "sourceDetail" ]
    },
    "GlossaryTerms" : {
      "description" : "Related business terms information",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "terms" : {
          "description" : "The related business terms",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/GlossaryTermAssociation"
          }
        },
        "auditStamp" : {
          "description" : "Audit stamp containing who reported the related business term",
          "$ref" : "#/definitions/AuditStamp"
        }
      },
      "required" : [ "terms", "auditStamp" ]
    },
    "GlossaryTermAssociation" : {
      "description" : "Properties of an applied glossary term.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "urn" : {
          "description" : "Urn of the applied glossary term",
          "type" : "string"
        },
        "actor" : {
          "default" : null,
          "description" : "The user URN which will be credited for adding associating this term to the entity",
          "type" : "string"
        },
        "context" : {
          "default" : null,
          "description" : "Additional context about the association",
          "type" : "string"
        },
        "attribution" : {
          "default" : null,
          "description" : "Information about who, why, and how this metadata was applied",
          "$ref" : "#/definitions/MetadataAttribution"
        }
      },
      "required" : [ "urn" ]
    },
    "ForeignKeySpec" : {
      "description" : "Description of a foreign key in a schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "foreignKey" : {
          "description" : "Foreign key definition in metadata schema.",
          "oneOf" : [ {
            "$ref" : "#/definitions/DatasetFieldForeignKey"
          }, {
            "$ref" : "#/definitions/UrnForeignKey"
          } ]
        }
      },
      "required" : [ "foreignKey" ]
    },
    "DatasetFieldForeignKey" : {
      "description" : "For non-urn based foregin keys.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "parentDataset" : {
          "description" : "dataset that stores the resource.",
          "type" : "string"
        },
        "currentFieldPaths" : {
          "description" : "List of fields in hosting(current) SchemaMetadata that conform a foreign key. List can contain a single entry or multiple entries if several entries in hosting schema conform a foreign key in a single parent dataset.",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "parentField" : {
          "description" : "SchemaField@fieldPath that uniquely identify field in parent dataset that this field references.",
          "type" : "string"
        }
      },
      "required" : [ "parentDataset", "currentFieldPaths", "parentField" ]
    },
    "UrnForeignKey" : {
      "description" : "If SchemaMetadata fields make any external references and references are of type com.linkedin.common.Urn or any children, this models can be used to mark it.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "currentFieldPath" : {
          "description" : "Field in hosting(current) SchemaMetadata.",
          "type" : "string"
        }
      },
      "required" : [ "currentFieldPath" ]
    },
    "ForeignKeyConstraint" : {
      "description" : "Description of a foreign key constraint in a schema.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "name" : {
          "description" : "Name of the constraint, likely provided from the source",
          "type" : "string"
        },
        "foreignFields" : {
          "description" : "Fields the constraint maps to on the foreign dataset",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "sourceFields" : {
          "description" : "Fields the constraint maps to on the source dataset",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "foreignDataset" : {
          "description" : "Reference to the foreign dataset for ease of lookup",
          "type" : "string"
        }
      },
      "required" : [ "name", "foreignFields", "sourceFields", "foreignDataset" ]
    }
  },
  "$ref" : "#/definitions/SchemaMetadata"
}