{
  "definitions" : {
    "VolumeAssertionInfo" : {
      "description" : "Attributes defining a dataset Volume Assertion",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "The type of the volume assertion being monitored.",
          "$ref" : "#/definitions/VolumeAssertionType"
        },
        "entity" : {
          "description" : "The entity targeted by this Volume check.",
          "type" : "string"
        },
        "rowCountTotal" : {
          "default" : null,
          "description" : "Produce FAILURE Assertion Result if the row count of the asset does not meet specific requirements.\nRequired if type is 'ROW_COUNT_TOTAL'",
          "$ref" : "#/definitions/RowCountTotal"
        },
        "rowCountChange" : {
          "default" : null,
          "description" : "Produce FAILURE Assertion Result if the delta row count of the asset does not meet specific requirements\nwithin a given period of time.\nRequired if type is 'ROW_COUNT_CHANGE'",
          "$ref" : "#/definitions/RowCountChange"
        },
        "incrementingSegmentRowCountTotal" : {
          "default" : null,
          "description" : "Produce FAILURE Assertion Result if the asset's latest incrementing segment row count total\ndoes not meet specific requirements. Required if type is 'INCREMENTING_SEGMENT_ROW_COUNT_TOTAL'",
          "$ref" : "#/definitions/IncrementingSegmentRowCountTotal"
        },
        "incrementingSegmentRowCountChange" : {
          "default" : null,
          "description" : "Produce FAILURE Assertion Result if the asset's incrementing segment row count delta\ndoes not meet specific requirements. Required if type is 'INCREMENTING_SEGMENT_ROW_COUNT_CHANGE'",
          "$ref" : "#/definitions/IncrementingSegmentRowCountChange"
        },
        "filter" : {
          "default" : null,
          "description" : "A definition of the specific filters that should be applied, when performing monitoring.\nIf not provided, there is no filter, and the full table is under consideration.",
          "$ref" : "#/definitions/DatasetFilter"
        }
      },
      "required" : [ "type", "entity" ]
    },
    "VolumeAssertionType" : {
      "enum" : [ "ROW_COUNT_TOTAL", "ROW_COUNT_CHANGE", "INCREMENTING_SEGMENT_ROW_COUNT_TOTAL", "INCREMENTING_SEGMENT_ROW_COUNT_CHANGE" ]
    },
    "RowCountTotal" : {
      "description" : "Attributes defining a ROW_COUNT_TOTAL volume assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "operator" : {
          "description" : "The operator you'd like to apply.\n\nNote that only numeric operators are valid inputs:\nGREATER_THAN, GREATER_THAN_OR_EQUAL_TO, EQUAL_TO, LESS_THAN, LESS_THAN_OR_EQUAL_TO,\nBETWEEN.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "description" : "The parameters you'd like to provide as input to the operator.\n\nNote that only numeric parameter types are valid inputs: NUMBER.",
          "$ref" : "#/definitions/AssertionStdParameters"
        }
      },
      "required" : [ "operator", "parameters" ]
    },
    "AssertionStdOperator" : {
      "description" : "A boolean operator that is applied on the input to an assertion, after an aggregation function has been applied.",
      "enum" : [ "BETWEEN", "LESS_THAN", "LESS_THAN_OR_EQUAL_TO", "GREATER_THAN", "GREATER_THAN_OR_EQUAL_TO", "EQUAL_TO", "NOT_EQUAL_TO", "NULL", "NOT_NULL", "CONTAIN", "END_WITH", "START_WITH", "REGEX_MATCH", "IN", "NOT_IN", "IS_TRUE", "IS_FALSE", "_NATIVE_" ]
    },
    "AssertionStdParameters" : {
      "description" : "Parameters for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "default" : null,
          "description" : "The value parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "maxValue" : {
          "default" : null,
          "description" : "The maxValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "minValue" : {
          "default" : null,
          "description" : "The minValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        }
      }
    },
    "AssertionStdParameter" : {
      "description" : "Single parameter for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "description" : "The parameter value",
          "type" : "string"
        },
        "type" : {
          "description" : "The type of the parameter",
          "$ref" : "#/definitions/AssertionStdParameterType"
        }
      },
      "required" : [ "value", "type" ]
    },
    "AssertionStdParameterType" : {
      "enum" : [ "STRING", "NUMBER", "LIST", "SET", "UNKNOWN" ]
    },
    "RowCountChange" : {
      "description" : "Attributes defining a ROW_COUNT_CHANGE volume assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "The type of the value used to evaluate the assertion: a fixed absolute value or a relative percentage.",
          "$ref" : "#/definitions/AssertionValueChangeType"
        },
        "operator" : {
          "description" : "The operator you'd like to apply.\n\nNote that only numeric operators are valid inputs:\nGREATER_THAN, GREATER_THAN_OR_EQUAL_TO, EQUAL_TO, LESS_THAN, LESS_THAN_OR_EQUAL_TO,\nBETWEEN.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "description" : "The parameters you'd like to provide as input to the operator.\n\nNote that only numeric parameter types are valid inputs: NUMBER.",
          "$ref" : "#/definitions/AssertionStdParameters"
        }
      },
      "required" : [ "type", "operator", "parameters" ]
    },
    "AssertionValueChangeType" : {
      "description" : "An enum to represent a type of change in an assertion value, metric, or measurement.",
      "enum" : [ "ABSOLUTE", "PERCENTAGE" ]
    },
    "IncrementingSegmentRowCountTotal" : {
      "description" : "Attributes defining an INCREMENTING_SEGMENT_ROW_COUNT_TOTAL volume assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "segment" : {
          "description" : "A specification of how the 'segment' can be derived using a column and an optional transformer function.",
          "$ref" : "#/definitions/IncrementingSegmentSpec"
        },
        "operator" : {
          "description" : "The operator you'd like to apply.\n\nNote that only numeric operators are valid inputs:\nGREATER_THAN, GREATER_THAN_OR_EQUAL_TO, EQUAL_TO, LESS_THAN, LESS_THAN_OR_EQUAL_TO,\nBETWEEN.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "description" : "The parameters you'd like to provide as input to the operator.\n\nNote that only numeric parameter types are valid inputs: NUMBER.",
          "$ref" : "#/definitions/AssertionStdParameters"
        }
      },
      "required" : [ "segment", "operator", "parameters" ]
    },
    "IncrementingSegmentSpec" : {
      "description" : "Core attributes required to identify an incrementing segment in a table. This type is mainly useful\nfor tables that constantly increase with new rows being added on a particular cadence (e.g. fact or event tables)\n\nAn incrementing segment represents a logical chunk of data which is INSERTED\ninto a dataset on a regular interval, along with the presence of a constantly-incrementing column\nvalue such as an event time, date partition, or last modified column.\n\nAn incrementing segment is principally identified by 2 key attributes combined:\n\n 1. A field or column that represents the incrementing value. New rows that are inserted will be identified using this column.\n    Note that the value of this column may not by itself represent the \"bucket\" or the \"segment\" in which the row falls.\n\n 2. [Optional] An transformer function that may be applied to the selected column value in order\n    to obtain the final \"segment identifier\" or \"bucket identifier\". Rows that have the same value after applying the transformation\n    will be grouped into the same segment, using which the final value (e.g. row count) will be determined.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "field" : {
          "description" : "The field to use to generate segments. It must be constantly incrementing as new rows are inserted.",
          "$ref" : "#/definitions/SchemaFieldSpec"
        },
        "transformer" : {
          "default" : null,
          "description" : "Optional transformer function to apply to the field in order to obtain the final segment or bucket identifier.\nIf not provided, then no operator will be applied to the field. (identity function)",
          "$ref" : "#/definitions/IncrementingSegmentFieldTransformer"
        }
      },
      "required" : [ "field" ]
    },
    "SchemaFieldSpec" : {
      "description" : "Lightweight spec used for referencing a particular schema field.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "path" : {
          "description" : "The field path",
          "type" : "string"
        },
        "type" : {
          "description" : "The DataHub standard schema field type.",
          "type" : "string"
        },
        "nativeType" : {
          "description" : "The native field type",
          "type" : "string"
        }
      },
      "required" : [ "path", "type", "nativeType" ]
    },
    "IncrementingSegmentFieldTransformer" : {
      "description" : "The definition of the transformer function  that should be applied to a given field / column value in a dataset\nin order to determine the segment or bucket that it belongs to, which in turn is used to evaluate\nvolume assertions.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "A 'standard' transformer type. Note that not all source systems will support all operators.",
          "$ref" : "#/definitions/IncrementingSegmentFieldTransformerType"
        },
        "nativeType" : {
          "default" : null,
          "description" : "The 'native' transformer type, useful as a back door if a custom operator is required.\nThis field is required if the type is NATIVE.",
          "type" : "string"
        }
      },
      "required" : [ "type" ]
    },
    "IncrementingSegmentFieldTransformerType" : {
      "enum" : [ "TIMESTAMP_MS_TO_MINUTE", "TIMESTAMP_MS_TO_HOUR", "TIMESTAMP_MS_TO_DATE", "TIMESTAMP_MS_TO_MONTH", "TIMESTAMP_MS_TO_YEAR", "FLOOR", "CEILING", "NATIVE" ]
    },
    "IncrementingSegmentRowCountChange" : {
      "description" : "Attributes defining an INCREMENTING_SEGMENT_ROW_COUNT_CHANGE volume assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "segment" : {
          "description" : "A specification of how the 'segment' can be derived using a column and an optional transformer function.",
          "$ref" : "#/definitions/IncrementingSegmentSpec"
        },
        "type" : {
          "description" : "The type of the value used to evaluate the assertion: a fixed absolute value or a relative percentage.",
          "$ref" : "#/definitions/AssertionValueChangeType"
        },
        "operator" : {
          "description" : "The operator you'd like to apply to the row count value\n\nNote that only numeric operators are valid inputs:\nGREATER_THAN, GREATER_THAN_OR_EQUAL_TO, EQUAL_TO, LESS_THAN, LESS_THAN_OR_EQUAL_TO,\nBETWEEN.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "description" : "The parameters you'd like to provide as input to the operator.\n\nNote that only numeric parameter types are valid inputs: NUMBER.",
          "$ref" : "#/definitions/AssertionStdParameters"
        }
      },
      "required" : [ "segment", "type", "operator", "parameters" ]
    },
    "DatasetFilter" : {
      "description" : "A definition of filters that should be used when\nquerying an external Dataset or Table.\n\nNote that this models should NOT be used for working with\nsearch / filter on DataHub Platform itself.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "How the partition will be represented in this model.\n\nIn the future, we'll likely add support for more structured\npredicates.",
          "$ref" : "#/definitions/DatasetFilterType"
        },
        "sql" : {
          "default" : null,
          "description" : "The raw where clause string which will be used for monitoring.\nRequired if the type is SQL.",
          "type" : "string"
        }
      },
      "required" : [ "type" ]
    },
    "DatasetFilterType" : {
      "enum" : [ "SQL" ]
    }
  },
  "$ref" : "#/definitions/VolumeAssertionInfo"
}