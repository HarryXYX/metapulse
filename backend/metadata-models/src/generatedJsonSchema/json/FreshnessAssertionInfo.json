{
  "definitions" : {
    "FreshnessAssertionInfo" : {
      "description" : "Attributes defining a Freshness Assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "The type of the freshness assertion being monitored.",
          "$ref" : "#/definitions/FreshnessAssertionType"
        },
        "entity" : {
          "description" : "The entity targeted by this Freshness check.",
          "type" : "string"
        },
        "schedule" : {
          "description" : "Produce FAILURE Assertion Result if the asset is not updated on the cadence and within the time range described by the schedule.",
          "$ref" : "#/definitions/FreshnessAssertionSchedule"
        },
        "filter" : {
          "default" : null,
          "description" : "A definition of the specific filters that should be applied, when performing monitoring.\nIf not provided, there is no filter, and the full table is under consideration.",
          "$ref" : "#/definitions/DatasetFilter"
        }
      },
      "required" : [ "type", "entity", "schedule" ]
    },
    "FreshnessAssertionType" : {
      "enum" : [ "DATASET_CHANGE", "DATA_JOB_RUN" ]
    },
    "FreshnessAssertionSchedule" : {
      "description" : "Attributes defining a single Freshness schedule.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "The type of a Freshness Assertion Schedule.\n\nOnce we support data-time-relative schedules (e.g. schedules relative to time partitions),\nwe will add those schedule types here.",
          "$ref" : "#/definitions/FreshnessAssertionScheduleType"
        },
        "cron" : {
          "default" : null,
          "description" : "A cron schedule. This field is required when type is CRON.",
          "$ref" : "#/definitions/FreshnessCronSchedule"
        },
        "fixedInterval" : {
          "default" : null,
          "description" : "A fixed interval schedule. This field is required when type is FIXED_INTERVAL.",
          "$ref" : "#/definitions/FixedIntervalSchedule"
        }
      },
      "required" : [ "type" ]
    },
    "FreshnessAssertionScheduleType" : {
      "enum" : [ "CRON", "FIXED_INTERVAL", "SINCE_THE_LAST_CHECK" ]
    },
    "FreshnessCronSchedule" : {
      "description" : "Attributes defining a CRON-formatted schedule used for defining a freshness assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "cron" : {
          "description" : "A cron-formatted execution interval, as a cron string, e.g. 1 * * * *",
          "type" : "string"
        },
        "timezone" : {
          "description" : "Timezone in which the cron interval applies, e.g. America/Los Angeles",
          "type" : "string"
        },
        "windowStartOffsetMs" : {
          "default" : null,
          "description" : "An optional offset in milliseconds to SUBTRACT from the timestamp generated by the cron schedule\nto generate the lower bounds of the \"freshness window\", or the window of time in which an event must have occurred in order for the Freshness check\nto be considering passing.\n\nIf left empty, the start of the SLA window will be the _end_ of the previously evaluated Freshness window.",
          "type" : "integer",
          "format" : "int64",
          "minimum" : -9223372036854775808,
          "maximum" : 9223372036854775807
        }
      },
      "required" : [ "cron", "timezone" ]
    },
    "FixedIntervalSchedule" : {
      "description" : "Attributes defining a relative fixed interval SLA schedule.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "unit" : {
          "description" : "Interval unit such as minute/hour/day etc.",
          "$ref" : "#/definitions/CalendarInterval"
        },
        "multiple" : {
          "default" : 1,
          "description" : "How many units. Defaults to 1.",
          "type" : "integer",
          "minimum" : -2147483648,
          "maximum" : 2147483647
        }
      },
      "required" : [ "unit", "multiple" ]
    },
    "CalendarInterval" : {
      "enum" : [ "SECOND", "MINUTE", "HOUR", "DAY", "WEEK", "MONTH", "QUARTER", "YEAR" ]
    },
    "DatasetFilter" : {
      "description" : "A definition of filters that should be used when\nquerying an external Dataset or Table.\n\nNote that this models should NOT be used for working with\nsearch / filter on DataHub Platform itself.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "How the partition will be represented in this model.\n\nIn the future, we'll likely add support for more structured\npredicates.",
          "$ref" : "#/definitions/DatasetFilterType"
        },
        "sql" : {
          "default" : null,
          "description" : "The raw where clause string which will be used for monitoring.\nRequired if the type is SQL.",
          "type" : "string"
        }
      },
      "required" : [ "type" ]
    },
    "DatasetFilterType" : {
      "enum" : [ "SQL" ]
    }
  },
  "$ref" : "#/definitions/FreshnessAssertionInfo"
}