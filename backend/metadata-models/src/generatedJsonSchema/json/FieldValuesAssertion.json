{
  "definitions" : {
    "FieldValuesAssertion" : {
      "description" : "Attributes defining a field values assertion, which asserts that the values for a field / column\nof a dataset / table matches a set of expectations.\n\nIn other words, this type of assertion acts as a semantic constraint applied to fields for a specific column.\n\nTODO: We should display the \"failed row count\" to the user if the column fails the verification rules.\nTODO: Determine whether we need an \"operator\" that can be applied to the field.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "field" : {
          "description" : "The field under evaluation",
          "$ref" : "#/definitions/SchemaFieldSpec"
        },
        "transform" : {
          "default" : null,
          "description" : "An optional transform to apply to field values\nbefore evaluating the operator.\n\nIf none is applied, the field value will be compared as is.",
          "$ref" : "#/definitions/FieldTransform"
        },
        "operator" : {
          "description" : "The predicate to evaluate against a single value of the field.\nDepending on the operator, parameters may be required in order to successfully\nevaluate the assertion against the field value.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "default" : null,
          "description" : "Standard parameters required for the assertion. e.g. min_value, max_value, value, columns",
          "$ref" : "#/definitions/AssertionStdParameters"
        },
        "failThreshold" : {
          "description" : "Additional customization about when the assertion\nshould be officially considered failing.",
          "$ref" : "#/definitions/FieldValuesFailThreshold"
        },
        "excludeNulls" : {
          "default" : true,
          "description" : "Whether to ignore or allow nulls when running the values assertion. (i.e.\nconsider only non-null values) using operators OTHER than the IS_NULL operator.\n\nDefaults to true, allowing null values.",
          "type" : "boolean"
        }
      },
      "required" : [ "field", "operator", "failThreshold", "excludeNulls" ]
    },
    "SchemaFieldSpec" : {
      "description" : "Lightweight spec used for referencing a particular schema field.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "path" : {
          "description" : "The field path",
          "type" : "string"
        },
        "type" : {
          "description" : "The DataHub standard schema field type.",
          "type" : "string"
        },
        "nativeType" : {
          "description" : "The native field type",
          "type" : "string"
        }
      },
      "required" : [ "path", "type", "nativeType" ]
    },
    "FieldTransform" : {
      "description" : "Definition of a transform applied to the values of a column / field.\nNote that the applicability of a field transform ultimately depends on the native type\nof the field / column.\n\nModel has single field to permit extension.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "The type of the field transform, e.g. the transformation\nfunction / operator to apply.",
          "$ref" : "#/definitions/FieldTransformType"
        }
      },
      "required" : [ "type" ]
    },
    "FieldTransformType" : {
      "enum" : [ "LENGTH" ]
    },
    "AssertionStdOperator" : {
      "description" : "A boolean operator that is applied on the input to an assertion, after an aggregation function has been applied.",
      "enum" : [ "BETWEEN", "LESS_THAN", "LESS_THAN_OR_EQUAL_TO", "GREATER_THAN", "GREATER_THAN_OR_EQUAL_TO", "EQUAL_TO", "NOT_EQUAL_TO", "NULL", "NOT_NULL", "CONTAIN", "END_WITH", "START_WITH", "REGEX_MATCH", "IN", "NOT_IN", "IS_TRUE", "IS_FALSE", "_NATIVE_" ]
    },
    "AssertionStdParameters" : {
      "description" : "Parameters for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "default" : null,
          "description" : "The value parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "maxValue" : {
          "default" : null,
          "description" : "The maxValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "minValue" : {
          "default" : null,
          "description" : "The minValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        }
      }
    },
    "AssertionStdParameter" : {
      "description" : "Single parameter for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "description" : "The parameter value",
          "type" : "string"
        },
        "type" : {
          "description" : "The type of the parameter",
          "$ref" : "#/definitions/AssertionStdParameterType"
        }
      },
      "required" : [ "value", "type" ]
    },
    "AssertionStdParameterType" : {
      "enum" : [ "STRING", "NUMBER", "LIST", "SET", "UNKNOWN" ]
    },
    "FieldValuesFailThreshold" : {
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "default" : "COUNT",
          "description" : "The type of failure threshold. Either based on the number\nof column values (rows) that fail the expectations, or the percentage\nof the total rows under consideration.",
          "$ref" : "#/definitions/FieldValuesFailThresholdType"
        },
        "value" : {
          "default" : 0,
          "description" : "By default this is 0, meaning that ALL column values (i.e. rows) must\nmeet the defined expectations.",
          "type" : "integer",
          "format" : "int64",
          "minimum" : -9223372036854775808,
          "maximum" : 9223372036854775807
        }
      },
      "required" : [ "type", "value" ]
    },
    "FieldValuesFailThresholdType" : {
      "enum" : [ "COUNT", "PERCENTAGE" ]
    }
  },
  "$ref" : "#/definitions/FieldValuesAssertion"
}