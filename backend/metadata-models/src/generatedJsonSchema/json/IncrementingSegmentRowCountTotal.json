{
  "definitions" : {
    "IncrementingSegmentRowCountTotal" : {
      "description" : "Attributes defining an INCREMENTING_SEGMENT_ROW_COUNT_TOTAL volume assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "segment" : {
          "description" : "A specification of how the 'segment' can be derived using a column and an optional transformer function.",
          "$ref" : "#/definitions/IncrementingSegmentSpec"
        },
        "operator" : {
          "description" : "The operator you'd like to apply.\n\nNote that only numeric operators are valid inputs:\nGREATER_THAN, GREATER_THAN_OR_EQUAL_TO, EQUAL_TO, LESS_THAN, LESS_THAN_OR_EQUAL_TO,\nBETWEEN.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "description" : "The parameters you'd like to provide as input to the operator.\n\nNote that only numeric parameter types are valid inputs: NUMBER.",
          "$ref" : "#/definitions/AssertionStdParameters"
        }
      },
      "required" : [ "segment", "operator", "parameters" ]
    },
    "IncrementingSegmentSpec" : {
      "description" : "Core attributes required to identify an incrementing segment in a table. This type is mainly useful\nfor tables that constantly increase with new rows being added on a particular cadence (e.g. fact or event tables)\n\nAn incrementing segment represents a logical chunk of data which is INSERTED\ninto a dataset on a regular interval, along with the presence of a constantly-incrementing column\nvalue such as an event time, date partition, or last modified column.\n\nAn incrementing segment is principally identified by 2 key attributes combined:\n\n 1. A field or column that represents the incrementing value. New rows that are inserted will be identified using this column.\n    Note that the value of this column may not by itself represent the \"bucket\" or the \"segment\" in which the row falls.\n\n 2. [Optional] An transformer function that may be applied to the selected column value in order\n    to obtain the final \"segment identifier\" or \"bucket identifier\". Rows that have the same value after applying the transformation\n    will be grouped into the same segment, using which the final value (e.g. row count) will be determined.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "field" : {
          "description" : "The field to use to generate segments. It must be constantly incrementing as new rows are inserted.",
          "$ref" : "#/definitions/SchemaFieldSpec"
        },
        "transformer" : {
          "default" : null,
          "description" : "Optional transformer function to apply to the field in order to obtain the final segment or bucket identifier.\nIf not provided, then no operator will be applied to the field. (identity function)",
          "$ref" : "#/definitions/IncrementingSegmentFieldTransformer"
        }
      },
      "required" : [ "field" ]
    },
    "SchemaFieldSpec" : {
      "description" : "Lightweight spec used for referencing a particular schema field.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "path" : {
          "description" : "The field path",
          "type" : "string"
        },
        "type" : {
          "description" : "The DataHub standard schema field type.",
          "type" : "string"
        },
        "nativeType" : {
          "description" : "The native field type",
          "type" : "string"
        }
      },
      "required" : [ "path", "type", "nativeType" ]
    },
    "IncrementingSegmentFieldTransformer" : {
      "description" : "The definition of the transformer function  that should be applied to a given field / column value in a dataset\nin order to determine the segment or bucket that it belongs to, which in turn is used to evaluate\nvolume assertions.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "A 'standard' transformer type. Note that not all source systems will support all operators.",
          "$ref" : "#/definitions/IncrementingSegmentFieldTransformerType"
        },
        "nativeType" : {
          "default" : null,
          "description" : "The 'native' transformer type, useful as a back door if a custom operator is required.\nThis field is required if the type is NATIVE.",
          "type" : "string"
        }
      },
      "required" : [ "type" ]
    },
    "IncrementingSegmentFieldTransformerType" : {
      "enum" : [ "TIMESTAMP_MS_TO_MINUTE", "TIMESTAMP_MS_TO_HOUR", "TIMESTAMP_MS_TO_DATE", "TIMESTAMP_MS_TO_MONTH", "TIMESTAMP_MS_TO_YEAR", "FLOOR", "CEILING", "NATIVE" ]
    },
    "AssertionStdOperator" : {
      "description" : "A boolean operator that is applied on the input to an assertion, after an aggregation function has been applied.",
      "enum" : [ "BETWEEN", "LESS_THAN", "LESS_THAN_OR_EQUAL_TO", "GREATER_THAN", "GREATER_THAN_OR_EQUAL_TO", "EQUAL_TO", "NOT_EQUAL_TO", "NULL", "NOT_NULL", "CONTAIN", "END_WITH", "START_WITH", "REGEX_MATCH", "IN", "NOT_IN", "IS_TRUE", "IS_FALSE", "_NATIVE_" ]
    },
    "AssertionStdParameters" : {
      "description" : "Parameters for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "default" : null,
          "description" : "The value parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "maxValue" : {
          "default" : null,
          "description" : "The maxValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "minValue" : {
          "default" : null,
          "description" : "The minValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        }
      }
    },
    "AssertionStdParameter" : {
      "description" : "Single parameter for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "description" : "The parameter value",
          "type" : "string"
        },
        "type" : {
          "description" : "The type of the parameter",
          "$ref" : "#/definitions/AssertionStdParameterType"
        }
      },
      "required" : [ "value", "type" ]
    },
    "AssertionStdParameterType" : {
      "enum" : [ "STRING", "NUMBER", "LIST", "SET", "UNKNOWN" ]
    }
  },
  "$ref" : "#/definitions/IncrementingSegmentRowCountTotal"
}