{
  "definitions" : {
    "UsageQueryResult" : {
      "description" : "Results of a query for usage data.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "buckets" : {
          "default" : null,
          "description" : " Raw buckets ",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/UsageAggregation"
          }
        },
        "aggregations" : {
          "description" : "Aggregated metrics. All fields are optional here, since they will be populated\nonly if the underlying buckets contain the data required to generate that aggregation.",
          "$ref" : "#/definitions/UsageQueryResultAggregations"
        }
      },
      "required" : [ "aggregations" ]
    },
    "UsageAggregation" : {
      "description" : "Usage data for a given resource, rolled up into a bucket.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "bucket" : {
          "description" : " Bucket start time in milliseconds ",
          "type" : "integer",
          "format" : "int64",
          "minimum" : -9223372036854775808,
          "maximum" : 9223372036854775807
        },
        "duration" : {
          "description" : " Bucket duration ",
          "$ref" : "#/definitions/WindowDuration"
        },
        "resource" : {
          "description" : " Resource associated with these usage stats ",
          "type" : "string"
        },
        "metrics" : {
          "description" : " Metrics associated with this bucket ",
          "$ref" : "#/definitions/UsageAggregationMetrics"
        }
      },
      "required" : [ "bucket", "duration", "resource", "metrics" ]
    },
    "WindowDuration" : {
      "description" : "Enum to define the length of a bucket when doing aggregations",
      "enum" : [ "YEAR", "MONTH", "WEEK", "DAY", "HOUR" ]
    },
    "UsageAggregationMetrics" : {
      "description" : "Metrics for usage data for a given resource and bucket. Not all fields\nmake sense for all buckets, so every field is optional.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "uniqueUserCount" : {
          "default" : null,
          "description" : " Unique user count ",
          "type" : "integer",
          "minimum" : -2147483648,
          "maximum" : 2147483647
        },
        "users" : {
          "default" : null,
          "description" : " Users within this bucket, with frequency counts ",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/UserUsageCounts"
          }
        },
        "totalSqlQueries" : {
          "default" : null,
          "description" : " Total SQL query count ",
          "type" : "integer",
          "minimum" : -2147483648,
          "maximum" : 2147483647
        },
        "topSqlQueries" : {
          "default" : null,
          "description" : " Frequent SQL queries; mostly makes sense for datasets in SQL databases ",
          "type" : "array",
          "items" : {
            "type" : "string"
          }
        },
        "fields" : {
          "default" : null,
          "description" : " Field-level usage stats ",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/FieldUsageCounts"
          }
        }
      }
    },
    "UserUsageCounts" : {
      "description" : " Records a single user's usage counts for a given resource ",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "user" : {
          "default" : null,
          "type" : "string"
        },
        "count" : {
          "type" : "integer",
          "minimum" : -2147483648,
          "maximum" : 2147483647
        },
        "userEmail" : {
          "default" : null,
          "description" : " If user_email is set, we attempt to resolve the user's urn upon ingest ",
          "type" : "string"
        }
      },
      "required" : [ "count" ]
    },
    "FieldUsageCounts" : {
      "description" : " Records field-level usage counts for a given resource ",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "fieldName" : {
          "type" : "string"
        },
        "count" : {
          "type" : "integer",
          "minimum" : -2147483648,
          "maximum" : 2147483647
        }
      },
      "required" : [ "fieldName", "count" ]
    },
    "UsageQueryResultAggregations" : {
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "uniqueUserCount" : {
          "default" : null,
          "type" : "integer",
          "minimum" : -2147483648,
          "maximum" : 2147483647
        },
        "totalSqlQueries" : {
          "default" : null,
          "type" : "integer",
          "minimum" : -2147483648,
          "maximum" : 2147483647
        },
        "users" : {
          "default" : null,
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/UserUsageCounts"
          }
        },
        "fields" : {
          "default" : null,
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/FieldUsageCounts"
          }
        }
      }
    }
  },
  "$ref" : "#/definitions/UsageQueryResult"
}