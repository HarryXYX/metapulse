{
  "definitions" : {
    "FieldAssertionInfo" : {
      "description" : "Attributes defining a Field Assertion.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "The type of the field assertion being monitored.",
          "$ref" : "#/definitions/FieldAssertionType"
        },
        "entity" : {
          "description" : "The entity targeted by this Field check.",
          "type" : "string"
        },
        "fieldValuesAssertion" : {
          "default" : null,
          "description" : "The definition of an assertion that validates individual values of a field / column for a set of rows.\nThis type of assertion verifies that each column value meets a particular requirement.",
          "$ref" : "#/definitions/FieldValuesAssertion"
        },
        "fieldMetricAssertion" : {
          "default" : null,
          "description" : "The definition of an assertion that validates a common metric obtained about a field / column for a set of rows.\nThis type of assertion verifies that the value of a high-level metric obtained by aggregating over a column meets\nexpectations",
          "$ref" : "#/definitions/FieldMetricAssertion"
        },
        "filter" : {
          "default" : null,
          "description" : "A definition of the specific filters that should be applied, when performing monitoring.\nIf not provided, there is no filter, and the full table is under consideration.\nIf using DataHub Dataset Profiles as the assertion source type, the value of this field will be ignored.",
          "$ref" : "#/definitions/DatasetFilter"
        }
      },
      "required" : [ "type", "entity" ]
    },
    "FieldAssertionType" : {
      "enum" : [ "FIELD_VALUES", "FIELD_METRIC" ]
    },
    "FieldValuesAssertion" : {
      "description" : "Attributes defining a field values assertion, which asserts that the values for a field / column\nof a dataset / table matches a set of expectations.\n\nIn other words, this type of assertion acts as a semantic constraint applied to fields for a specific column.\n\nTODO: We should display the \"failed row count\" to the user if the column fails the verification rules.\nTODO: Determine whether we need an \"operator\" that can be applied to the field.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "field" : {
          "description" : "The field under evaluation",
          "$ref" : "#/definitions/SchemaFieldSpec"
        },
        "transform" : {
          "default" : null,
          "description" : "An optional transform to apply to field values\nbefore evaluating the operator.\n\nIf none is applied, the field value will be compared as is.",
          "$ref" : "#/definitions/FieldTransform"
        },
        "operator" : {
          "description" : "The predicate to evaluate against a single value of the field.\nDepending on the operator, parameters may be required in order to successfully\nevaluate the assertion against the field value.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "default" : null,
          "description" : "Standard parameters required for the assertion. e.g. min_value, max_value, value, columns",
          "$ref" : "#/definitions/AssertionStdParameters"
        },
        "failThreshold" : {
          "description" : "Additional customization about when the assertion\nshould be officially considered failing.",
          "$ref" : "#/definitions/FieldValuesFailThreshold"
        },
        "excludeNulls" : {
          "default" : true,
          "description" : "Whether to ignore or allow nulls when running the values assertion. (i.e.\nconsider only non-null values) using operators OTHER than the IS_NULL operator.\n\nDefaults to true, allowing null values.",
          "type" : "boolean"
        }
      },
      "required" : [ "field", "operator", "failThreshold", "excludeNulls" ]
    },
    "SchemaFieldSpec" : {
      "description" : "Lightweight spec used for referencing a particular schema field.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "path" : {
          "description" : "The field path",
          "type" : "string"
        },
        "type" : {
          "description" : "The DataHub standard schema field type.",
          "type" : "string"
        },
        "nativeType" : {
          "description" : "The native field type",
          "type" : "string"
        }
      },
      "required" : [ "path", "type", "nativeType" ]
    },
    "FieldTransform" : {
      "description" : "Definition of a transform applied to the values of a column / field.\nNote that the applicability of a field transform ultimately depends on the native type\nof the field / column.\n\nModel has single field to permit extension.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "The type of the field transform, e.g. the transformation\nfunction / operator to apply.",
          "$ref" : "#/definitions/FieldTransformType"
        }
      },
      "required" : [ "type" ]
    },
    "FieldTransformType" : {
      "enum" : [ "LENGTH" ]
    },
    "AssertionStdOperator" : {
      "description" : "A boolean operator that is applied on the input to an assertion, after an aggregation function has been applied.",
      "enum" : [ "BETWEEN", "LESS_THAN", "LESS_THAN_OR_EQUAL_TO", "GREATER_THAN", "GREATER_THAN_OR_EQUAL_TO", "EQUAL_TO", "NOT_EQUAL_TO", "NULL", "NOT_NULL", "CONTAIN", "END_WITH", "START_WITH", "REGEX_MATCH", "IN", "NOT_IN", "IS_TRUE", "IS_FALSE", "_NATIVE_" ]
    },
    "AssertionStdParameters" : {
      "description" : "Parameters for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "default" : null,
          "description" : "The value parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "maxValue" : {
          "default" : null,
          "description" : "The maxValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        },
        "minValue" : {
          "default" : null,
          "description" : "The minValue parameter of an assertion",
          "$ref" : "#/definitions/AssertionStdParameter"
        }
      }
    },
    "AssertionStdParameter" : {
      "description" : "Single parameter for AssertionStdOperators.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "value" : {
          "description" : "The parameter value",
          "type" : "string"
        },
        "type" : {
          "description" : "The type of the parameter",
          "$ref" : "#/definitions/AssertionStdParameterType"
        }
      },
      "required" : [ "value", "type" ]
    },
    "AssertionStdParameterType" : {
      "enum" : [ "STRING", "NUMBER", "LIST", "SET", "UNKNOWN" ]
    },
    "FieldValuesFailThreshold" : {
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "default" : "COUNT",
          "description" : "The type of failure threshold. Either based on the number\nof column values (rows) that fail the expectations, or the percentage\nof the total rows under consideration.",
          "$ref" : "#/definitions/FieldValuesFailThresholdType"
        },
        "value" : {
          "default" : 0,
          "description" : "By default this is 0, meaning that ALL column values (i.e. rows) must\nmeet the defined expectations.",
          "type" : "integer",
          "format" : "int64",
          "minimum" : -9223372036854775808,
          "maximum" : 9223372036854775807
        }
      },
      "required" : [ "type", "value" ]
    },
    "FieldValuesFailThresholdType" : {
      "enum" : [ "COUNT", "PERCENTAGE" ]
    },
    "FieldMetricAssertion" : {
      "description" : "Attributes defining a field metric assertion, which asserts an expectation against\na common metric derived from the set of field / column values, for example:\nmax, min, median, null count, null percentage, unique count, unique percentage, and more.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "field" : {
          "description" : "The field under evaluation",
          "$ref" : "#/definitions/SchemaFieldSpec"
        },
        "metric" : {
          "description" : "The specific metric to assert against. This is the value that\nwill be obtained by applying a standard operation, such as an aggregation,\nto the selected field.",
          "$ref" : "#/definitions/FieldMetricType"
        },
        "operator" : {
          "description" : "The predicate to evaluate against the metric for the field / column.\nDepending on the operator, parameters may be required in order to successfully\nevaluate the assertion against the metric value.",
          "$ref" : "#/definitions/AssertionStdOperator"
        },
        "parameters" : {
          "default" : null,
          "description" : "Standard parameters required for the assertion. e.g. min_value, max_value, value, columns",
          "$ref" : "#/definitions/AssertionStdParameters"
        }
      },
      "required" : [ "field", "metric", "operator" ]
    },
    "FieldMetricType" : {
      "description" : "A standard metric that can be derived from the set of values\nfor a specific field / column of a dataset / table.",
      "enum" : [ "UNIQUE_COUNT", "UNIQUE_PERCENTAGE", "NULL_COUNT", "NULL_PERCENTAGE", "MIN", "MAX", "MEAN", "MEDIAN", "STDDEV", "NEGATIVE_COUNT", "NEGATIVE_PERCENTAGE", "ZERO_COUNT", "ZERO_PERCENTAGE", "MIN_LENGTH", "MAX_LENGTH", "EMPTY_COUNT", "EMPTY_PERCENTAGE" ]
    },
    "DatasetFilter" : {
      "description" : "A definition of filters that should be used when\nquerying an external Dataset or Table.\n\nNote that this models should NOT be used for working with\nsearch / filter on DataHub Platform itself.",
      "type" : "object",
      "additionalProperties" : false,
      "properties" : {
        "type" : {
          "description" : "How the partition will be represented in this model.\n\nIn the future, we'll likely add support for more structured\npredicates.",
          "$ref" : "#/definitions/DatasetFilterType"
        },
        "sql" : {
          "default" : null,
          "description" : "The raw where clause string which will be used for monitoring.\nRequired if the type is SQL.",
          "type" : "string"
        }
      },
      "required" : [ "type" ]
    },
    "DatasetFilterType" : {
      "enum" : [ "SQL" ]
    }
  },
  "$ref" : "#/definitions/FieldAssertionInfo"
}